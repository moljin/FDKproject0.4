{% extends "base.html" %}

{% block title %}
    상품 등록
{% endblock %}

{% block head_css %}
    <link href="{{ url_for('static', filename='statics/font-awesome-5.15.1/css/all.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='statics/unit_editor/css/unitsEditor.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='statics/css/product.css') }}" rel="stylesheet">
{% endblock %}

{% block head_js %}
    <script src="{{ url_for('static', filename='statics/unit_editor/js/unitsEditor.js') }}"></script>
    <script>
        unitsImagesSaveAjax = "{{ url_for("products.units_images_save_ajax") }}"
        CSRF_TOKEN = "{{ csrf_token() }}"
        HOME_URL = "{{ url_for('commons.index') }}"
    </script>
{% endblock %}

{% block above_main %}
{% endblock %}

{% block body %}
    상품 생성
    <section class="product-section">
        <div class="form-container">
            <form method="POST" enctype="multipart/form-data">
                {{ form.csrf_token }}
                <section class="product-summary uk-child-width-1-2@s" uk-grid>
                    <div class="product-view">
                        <img src="{{ url_for('static', filename='statics/images/sample/img_3.png') }}" alt="">
                    </div>
                    <div class="product-info">
                        <ul class="uk-breadcrumb  mt-5 ml-20">
                            <li><a href="{{ url_for("profiles.detail", _id=target_profile.id) }}"><div class="uk-inline"><img class="profile-img" src="/{{ target_profile.image_path }}" alt="mdo"><div class="uk-inline">{{ target_profile.nickname }}</div></div></a></li>
                            <li><a href="{{ url_for("products.shopcategory_detail", _id=shopcategory.id, slug=shopcategory.slug) }}"><div class="uk-inline"><img class="symbol-img" src="/{{ shopcategory.symbol_path }}" alt="mdo"><div class="uk-inline">{{ shopcategory.title }}</div></div></a></li>
                            <li class="uk-inline"><span><button class="breadcrumb-button"><i class="fas fa-store-alt mr-7"></i></button>상품 등록</span></li>
                        </ul>

                        <div class="info-content">
                            <div class="form-input mb-5">{{ form.title(class="uk-input", placeholder="상품명") }}</div>
                            <div class="pl-7 pr-7 mt-5">{{ form.price(class="uk-input mr-5") }} 원</div>
                            <div class="pl-7 pr-7 mt-10">{{ form.stock(class="uk-input mr-5") }} 개</div>
                            <div class="pl-7 pr-7 mt-15" uk-grid><div>기본 할인금액:</div><div class="mt-5 mb-5 uk-width-expand pl-7">{{ form.base_dc_amount(class="uk-input mr-5") }} 원</div></div>
                            <div class="pl-7 pr-7 mt-7" uk-grid><div>배송비:</div><div class="mt-5 mb-5 uk-width-expand pl-7">{{ form.delivery_pay(class="uk-input mr-5") }} 원</div></div>
                            <div class="pl-7 pr-7 mt-7">전시여부 {{ form.available_display }} / 주문가능 {{ form.available_order }}</div>
                        </div>

                    </div>
                </section>

                {% block wysiwyg %}
                    <section class="wysiwyg-wrapper">
                        {% include 'includes/unit_editor/unit_editor.html' %}
                    </section>
                {% endblock %}

                <section class="product-option">
                    <div class="option-add mt-10 mb-15 pl-7">
                            <a href="javascript:void(0);" title="옵션 추가하기"><button class="add-input-btn">옵션추가<i class="fas fa-folder-plus ml-7"></i></button></a>
                        </div>
                    <div class="option-form-wrapper uk-child-width-1-2@s uk-child-width-1-3@m uk-grid-small" uk-grid >

                    </div>
                </section>

                <section class="product-others">
                    <div class="pl-7 pr-7">{{ form.meta_description(class="uk-textarea", rows="2", placeholder="메타설명(최대 160자)") }}</div>
                </section>

                <div class="units-submit-div">
                    <button id="form-submit" class="units-submit mt-15" type="submit">저장</button>
                </div>
                <input type="hidden" id="orm_id" name="orm_id" value="{{ orm_id }}">
                <input type="hidden" name="shopcategory_id" value="{{ request.full_path }}">
                상점카테고리 ID: {{ request.full_path.split("?")[1].split("&")[0].split("=")[1] }}
                <p>orm_id::: {{ orm_id }}</p>
            </form>
        </div>
    </section>

{% endblock %}

{% block content %}
    <section class="body-wrapper other-body mb-15">
        <a href="https://github.com/improvise0828/stone-editor" target="_blank">Github: stone editor :: Reference</a>
    </section>

{% endblock %}

{% block units_script %}
    <script>
        document.querySelector(".units-btn-group.cancel-group > span:nth-child(1)").style.display = "none";
        document.querySelector(".units-btn-group.cancel-group > span:nth-child(2)").style.display = "none";
    </script>

    <script src="{{ url_for('static', filename='statics/js/commons/slideToggle.js') }}"></script>
    <script src="{{ url_for('static', filename='statics/unit_editor/js/toolbar.js') }}"></script>
    <script src="{{ url_for('static', filename='statics/unit_editor/js/toolbarMediaQuery.js') }}"></script>
    <script src="{{ url_for('static', filename='statics/js/products/product/productOption.js') }}"></script>
    <script src="{{ url_for('static', filename='statics/unit_editor/js/submit.js') }}"></script>
{% endblock %}